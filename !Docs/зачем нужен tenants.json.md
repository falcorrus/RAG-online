# Зачем нужен файл storage/tenants.json

Файл `storage/tenants.json` является основной базой данных приложения RAG-online. Он необходим для работы следующих функций:

1.  **Аутентификация и безопасность:**
    *   Хранит email пользователей и хешированные пароли (`bcrypt`) для входа в систему.
    *   Определяет права администратора (`is_admin`).

2.  **Идентификация арендаторов (Tenants):**
    *   Связывает уникальные поддомены (например, `fitness.rag.reloto.ru`) с конкретными аккаунтами пользователей.
    *   Позволяет серверу определять, чью базу знаний (KB) использовать при запросе с конкретного хоста.

3.  **Кэширование данных искусственного интеллекта (Gemini):**
    *   **suggestions_cache:** Хранит список рекомендованных вопросов, сгенерированных на основе базы знаний, на разных языках (ru, en, pt).
    *   **business_names_cache:** Хранит извлеченное и переведенное название компании.
    *   **underAnswer_cache:** Хранит контактную информацию и подписи для отображения под ответами чата.
    *   Это кэширование экономит токены и ускоряет загрузку виджета для конечных пользователей.

4.  **Персонализация настроек:**
    *   Хранит настройки интерфейса (например, должен ли чат быть открыт по умолчанию `initiallyOpen`).
    *   Запоминает язык по умолчанию для конкретного арендатора.

В коде `server.py` за взаимодействие с этим файлом отвечают функции `get_tenants()` и `save_tenants()`. Без этого файла система не сможет авторизовать пользователей и корректно отображать настройки виджетов.
