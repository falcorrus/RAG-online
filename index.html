<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Knowledge Base</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=1.5">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-W2FKP6S6QN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-W2FKP6S6QN');
    </script>
</head>

<body>
    <div class="background-gradient"></div>

    <div class="floating-btn" id="floatingBtn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
    </div>

    <div class="header-tools force-hidden">
        <div class="language-switcher">
            <button class="lang-btn active" data-lang="ru">RU</button>
            <button class="lang-btn" data-lang="en">EN</button>
            <button class="lang-btn" data-lang="pt">PT</button>
        </div>
        <button class="icon-btn" id="adminBtn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏" data-i18n-title="admin_btn_title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
        </button>
        <button class="icon-btn" id="minimizeBtn" title="–°–≤–µ—Ä–Ω—É—Ç—å" data-i18n-title="minimize_btn_title">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="4 14 10 14 10 20"></polyline>
                <polyline points="20 10 14 10 14 4"></polyline>
            </svg>
        </button>
    </div>

    <!-- Admin Panel Overlay -->
    <div class="admin-overlay hidden" id="adminOverlay">
        <!-- Onboarding View -->
        <div class="admin-panel hidden" id="onboardingPanel">
            <div class="admin-header-compact">
                <div class="header-top">
                    <h2 data-i18n="onboarding_title">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
                    <button class="icon-close-btn" onclick="document.getElementById('adminOverlay').classList.add('hidden')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
            </div>
            <div class="admin-main">
                <div class="admin-content">
                    <div class="onboarding-steps">
                        <div class="onboarding-step">
                            <div class="step-icon-wrapper">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" y1="8" x2="19" y2="14"/><line x1="22" y1="11" x2="16" y2="11"/></svg>
                            </div>
                            <div class="step-info">
                                <div class="step-text" data-i18n="onboarding_step_1">–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç (RAG)</div>
                            </div>
                        </div>
                        <div class="onboarding-step">
                            <div class="step-icon-wrapper">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M12 12v9"/><path d="m16 16-4-4-4 4"/></svg>
                            </div>
                            <div class="step-info">
                                <div class="step-text" data-i18n="onboarding_step_2">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∑–Ω–∞–Ω–∏—è (markdown, txt)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="admin-footer">
                <button class="save-btn" id="onboardingNextBtn" data-i18n="onboarding_next">–î–∞–ª–µ–µ</button>
            </div>
        </div>

        <!-- Auth View -->
        <div class="admin-panel hidden" id="authPanel">
            <div class="admin-header-compact">
                <div class="header-top">
                    <h2 id="authTitle">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                    <button class="icon-close-btn" onclick="document.getElementById('adminOverlay').classList.add('hidden')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
            </div>
            <div class="admin-main">
                <div class="admin-content">
                    <div class="setting-group">
                        <label class="setting-label">Email</label>
                        <input type="email" id="authEmail" class="admin-select" placeholder="name@company.com">
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="authPass" class="admin-select" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <div class="setting-group hidden" id="subdomainGroup">
                        <label class="setting-label" data-i18n="auth_subdomain_label">–ñ–µ–ª–∞–µ–º—ã–π –ø–æ–¥–¥–æ–º–µ–Ω</label>
                        <div class="subdomain-input-wrapper">
                            <input type="text" id="authSubdomain" class="admin-select" placeholder="my-project">
                            <span class="subdomain-suffix">.rag.reloto.ru</span>
                        </div>
                    </div>
                    <p id="authError" class="hidden"></p>
                </div>
            </div>
            <div class="admin-footer auth-footer">
                <button class="save-btn" id="authBtn" data-i18n="auth_btn_login">–í–æ–π—Ç–∏</button>
                <div class="auth-extra-actions">
                    <button class="action-btn hidden" id="authBackBtn">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="action-btn" id="toggleAuthMode" data-i18n="auth_toggle_register">–•–æ—Ç–∏—Ç–µ —Ç–∞–∫–æ–π –∂–µ? –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>
            </div>
        </div>

        <!-- Admin View -->
        <div class="admin-panel hidden" id="settingsPanel">
            <div class="admin-header-compact">
                <div class="header-top">
                    <h2 id="adminPanelTitle" data-i18n="admin_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    <button class="icon-close-btn" id="closeAdminBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <div class="user-badge-wrapper">
                    <span class="user-badge admin-email"></span>
                </div>
                <div class="admin-tabs segmented-control">
                    <button class="tab-btn active" data-tab="settings" data-i18n="tab_settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <button class="tab-btn" data-tab="logs" id="viewLogsBtn" data-i18n="tab_logs">–õ–æ–≥–∏ —á–∞—Ç–∞</button>
                </div>
            </div>

            <div class="admin-main">
                <!-- Settings Tab -->
                <div class="tab-content active" id="settingsTab">
                    <div class="admin-content">
                        <div class="setting-group">
                            <label class="setting-label" data-i18n="kb_upload_label">–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (.md)</label>
                            <div class="drop-zone" id="kbDropZone">
                                <div class="drop-zone-content">
                                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                                    <p data-i18n="drop_zone_text">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ .md —Ñ–∞–π–ª</p>
                                    <input type="file" id="kbFileInput" accept=".md" class="hidden">
                                </div>
                                <div class="file-info hidden" id="fileInfo">
                                    <span class="file-name"></span>
                                    <button class="icon-close-btn small" id="removeFileBtn">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="settings-actions">
                            <button class="action-btn small" id="downloadKbBtn" data-i18n="download_kb_btn">–°–∫–∞—á–∞—Ç—å –±–∞–∑—É</button>
                        </div>
                        <div class="setting-group">
                            <label class="setting-label" data-i18n="theme_label">–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</label>
                            <select id="themeSelect" class="admin-select">
                                <option value="glass">Glass (Default)</option>
                                <option value="linear">Linear</option>
                            </select>
                        </div>

                        <div class="setting-group">
                            <div class="toggle-wrapper">
                                <span class="setting-label" data-i18n="initially_open_label">–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ</span>
                                <label class="switch">
                                    <input type="checkbox" id="initiallyOpenToggle">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Logs Tab -->
                <div class="tab-content" id="logsTab">
                    <div class="logs-toolbar">
                        <button class="action-btn small" id="downloadLogsBtn" data-i18n="download_logs_btn">–°–∫–∞—á–∞—Ç—å –ª–æ–≥–∏</button>
                        <button class="action-btn small danger" id="clearLogsBtn" data-i18n="clear_logs_btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
                    </div>
                    <div class="admin-content" id="logsContent">
                        <p data-i18n="no_logs_msg">–õ–æ–≥–∏ –ø–æ–∫–∞ –ø—É—Å—Ç—ã.</p>
                    </div>
                </div>
            </div>

            <div class="admin-footer">
                <button class="save-btn" id="saveAdminBtn" data-i18n="close_btn">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <main class="container" id="mainContainer">
        <!-- Welcome Banner -->
        <div class="welcome-banner force-hidden" id="welcomeBanner">
            <h2 class="welcome-title">–ó–∞–ø—É—Å–∫–∞–µ–º —Å–≤–æ–π RAG <span id="welcomeTenantName"></span></h2>
            <ul class="todo-list">
                <li class="todo-item done">
                    <span class="todo-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z" clip-rule="evenodd" /></svg>
                    </span>
                    <span class="todo-text">–ê–∫–∫–∞—É–Ω—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω</span>
                </li>
                <li class="todo-item" id="todoUpload">
                    <span class="todo-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>
                    </span>
                    <span class="todo-text">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown</span>
                </li>
            </ul>
            <div class="welcome-actions">
                <button class="welcome-btn secondary" id="downloadDemoBtn" data-i18n="welcome_download_demo">–°–∫–∞—á–∞—Ç—å –ø—Ä–∏–º–µ—Ä</button>
                <button class="welcome-btn primary" id="goToSettingsBtn" data-i18n="welcome_go_to_settings">–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </div>
        </div>

        <div class="search-wrapper" id="searchWrapper">
            <div class="title-area">
                <div class="sparkle-icon force-hidden" id="mainSparkle">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v3m0 12v3M5.6 5.6l2.1 2.1m8.6 8.6l2.1 2.1M3 12h3m12 0h3M5.6 18.4l2.1-2.1m8.6-8.6l2.1-2.1"></path></svg>
                </div>
                <h1 data-i18n="title_main" id="mainTitle" class="force-hidden">AI Knowledge Base</h1>
            </div>

            <div class="input-container" id="inputContainer">
                <textarea id="queryInput" placeholder="–°–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ" rows="1" wt-ignore-input="true" data-i18n-placeholder="input_placeholder"></textarea>
                <button id="clearBtn" class="clear-btn hidden" title="Clear" data-i18n-title="clear_btn_title">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
                <button id="sendBtn" class="send-btn" aria-label="Search" data-i18n-aria="send_btn_aria">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                </button>
            </div>
            <div class="suggestions" id="suggestions"></div>
        </div>

        <div class="results-area hidden" id="resultsArea">
            <div class="status-indicator">
                <div class="loader hidden" id="loader"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
                <span id="statusText" class="status-text"></span>
            </div>
            <div class="answer-card hidden" id="answerCard">
                <div class="answer-content" id="answerContent"></div>
                <div class="answer-footer">
                    <span class="source-badge" id="sourceBadge" data-i18n="source_label">–ò—Å—Ç–æ—á–Ω–∏–∫: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</span>
                    <button class="action-btn small" id="copyBtn" title="Copy" data-i18n-title="copy_btn_title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer force-hidden">
        <div class="powered-by"><a href="#" id="promoLink" data-i18n="promo_link">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π RAG –≤ 2 –∫–ª–∏–∫–∞</a></div>
        <div class="creator-footer">made in <a href="#" id="creatorLink">Broz studio</a></div>
    </footer>

    <div class="creator-popup" id="creatorPopup">üöÄ&nbsp;&nbsp;<a href="https://kirshin.carrd.co/" target="_blank">kirshin.carrd.co</a></div>
    <div id="toast" class="toast"><span class="toast-icon"></span><span id="toastMessage"></span></div>

    <!-- Modals -->
    <div class="admin-overlay hidden" id="confirmationModal">
        <div class="admin-panel" style="max-width: 400px;">
            <div class="admin-header-compact">
                <div class="header-top">
                    <h2 data-i18n="confirm_title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
                    <button class="icon-close-btn small" id="closeConfirmBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
            </div>
            <div class="admin-main"><div class="admin-content"><p id="confirmMessage"></p></div></div>
            <div class="admin-footer auth-footer">
                <button class="save-btn btn-danger" id="confirmActionBtn" data-i18n="delete_btn">–£–¥–∞–ª–∏—Ç—å</button>
                <button class="action-btn" id="cancelConfirmBtn" data-i18n="cancel_btn">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div class="admin-overlay hidden" id="processingModal">
        <div class="admin-panel" style="max-width: 400px; text-align: center;">
            <div class="admin-content" style="padding: 48px 32px;">
                <div class="processing-loader"><div class="spinner"></div></div>
                <h2 id="processingTitle" style="margin-top: 24px;" data-i18n="processing_kb_title">–ë–∞–∑–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è</h2>
                <p id="processingMessage" style="margin-top: 12px; color: var(--text-secondary);">–ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥...</p>
            </div>
        </div>
    </div>

    <script src="script.js?v=4"></script>
</body>
</html>